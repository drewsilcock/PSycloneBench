! Manually written as an example. Will be generated by PSyclone.
module psy

  implicit none

contains

  subroutine invoke_0(zgru,prd,zgrv)

    type(r3d_field), intent(inout) :: zgru,prd,zgrv

    use horiz_density_gradient_u_mod, only : horizontal_density_gradient_u_code
    use horiz_density_gradient_v_mod, only : horizontal_density_gradient_v_code
    use grid_mod, only : grid

    jpk = grid%upper("K")
    jpj = grid%upper("J")
    jpi = grid%upper("I")

    do jk = 1, jpk
      do jj = 1, jpj-1
        do ji = 1, jpi-1
          call horizontal_density_gradient_u_code(ji,jj,jk,zgru%data,prd%data,grid%umask)
       end do
      end do
    end do

    do jk = 1, jpk
      do jj = 1, jpj-1
        do ji = 1, jpi-1
          call horizontal_density_gradient_v_code(ji,jj,jk,zgrv%data,prd%data,grid%vmask)
       end do
      end do
    end do

  end subroutine invoke_0

  subroutine invoke_1(...)
    ...
  end subroutine invoke_1

  subroutine invoke_2(...)
    ...
  end subroutine invoke_2

end module psy
